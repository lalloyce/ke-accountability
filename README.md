# Kenya Accountability

A distributed poll/elections management system for transparent and verifiable election results.

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

## Integrate with editors

Enhance your Nx experience by installing [Nx Console](https://nx.dev/nx-console) for your favorite editor. Nx Console
provides an interactive UI to view your projects, run tasks, generate code, and more! Available for VSCode, IntelliJ and
comes with a LSP for Vim users.

## Setup and Installation

### Prerequisites
- Node.js (v16 or later)
- MongoDB (local or cloud instance)
- npm or yarn

### Environment Variables
Create a `.env.local` file in the root directory with the following variables:
```
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/ke-accountability
# or your MongoDB Atlas connection string

# NextAuth Configuration
NEXTAUTH_URL=http://localhost:4200
NEXTAUTH_SECRET=your-secret-key-for-jwt-encryption

# Optional: Ethereum Configuration (for blockchain integration)
ETHEREUM_PROVIDER_URL=https://goerli.infura.io/v3/your-infura-project-id
```

### Installation Steps
1. Clone the repository
2. Install dependencies:
   ```
   npm install
   ```
3. Run database migrations (if any):
   ```
   npm run migrate
   ```
4. Create an admin user:
   ```
   npm run create-admin
   ```

## Start the application

Run `npx nx dev ke-accountability` to start the development server.

## Build for production

Run `npx nx build ke-accountability` to build the application. The build artifacts are stored in the output directory (e.g. `dist/` or `build/`), ready to be deployed.

## Running tasks

To execute tasks with Nx use the following syntax:

```
npx nx <target> <project> <...options>
```

You can also run multiple targets:

```
npx nx run-many -t <target1> <target2>
```

..or add `-p` to filter specific projects

```
npx nx run-many -t <target1> <target2> -p <proj1> <proj2>
```

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/features/run-tasks).

## Set up CI!

Nx comes with local caching already built-in (check your `nx.json`). On CI you might want to go a step further.

- [Set up remote caching](https://nx.dev/features/share-your-cache)
- [Set up task distribution across multiple machines](https://nx.dev/nx-cloud/features/distribute-task-execution)
- [Learn more how to setup CI](https://nx.dev/recipes/ci)

## Explore the project graph

Run `npx nx graph` to show the graph of the workspace.
It will show tasks that you can run with Nx.

- [Learn more about Exploring the Project Graph](https://nx.dev/core-features/explore-graph)

## Project Overview

### Purpose
The Kenya Accountability project is a distributed poll/elections management system designed to ensure transparency and accountability in election processes. The system allows authenticated users to upload election results from their polling stations, which are then verified by multiple users before being permanently recorded.

### Key Features
- **User Authentication**: Only verified users can upload and authenticate election results
- **Results Upload**: Users can upload election results from their polling stations
- **Distributed Verification**: Results require verification by at least 5 different users
- **Immutable Ledger**: Once verified, results are permanently recorded and cannot be modified
- **Transparency**: All verifiers and uploaders are identified and accountable
- **Privacy**: Verification process is private until completion
- **Comments System**: Verifiers must provide reasons for their verification decisions

### How It Works
1. Authenticated users upload election results from their polling stations
2. Other authenticated users verify the results
3. Each verification includes comments explaining the verification decision
4. Until 5 verifications are complete, no one knows what others have decided
5. Once 5 verifications are received, the result is automatically posted to the ledger
6. Posted results become immutable and publicly viewable

### Blockchain Integration
We are exploring blockchain integration for this system to provide:
- Immutable record-keeping
- Distributed consensus
- Transparent audit trail
- Enhanced security
- Resistance to tampering

#### Current Implementation
The current system implements blockchain-inspired features:
- Hash-based ledger entries with previous hash references (creating a chain)
- Immutable records once verified
- Integrity verification through hash validation
- Distributed verification requiring multiple confirmations

#### Future Blockchain Integration
For full blockchain integration, we plan to:

1. **Ethereum Integration**
   - Smart contracts for election result verification
   - Automatic ledger entry creation upon verification
   - Public verification of results on the blockchain

2. **Implementation Approach**
   - Use ethers.js library (already included as a dependency)
   - Create smart contracts for:
     - Election result storage
     - Verification process
     - Ledger management
   - Deploy contracts to Ethereum testnet (Goerli/Sepolia) for testing
   - Move to Ethereum mainnet or a Layer 2 solution for production

3. **Technical Considerations**
   - Gas costs for transactions
   - Transaction throughput limitations
   - Private key management for users
   - Integration with existing authentication system

## Connect with us!

- [Join the community](https://nx.dev/community)
- [Subscribe to the Nx Youtube Channel](https://www.youtube.com/@nxdevtools)
- [Follow us on Twitter](https://twitter.com/nxdevtools)
